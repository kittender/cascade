@import 'settings';

.box {
  --space: #{$medium};
  display: block;
  padding: var(--space);
}

.center {
  box-sizing: content-box;
  display: block;
  margin-left: auto;
  margin-right: auto;
  max-width: $measure;
}

.media {
  --space: #{$medium};
  display: flex;
  align-items: flex-start;
  
  > :first-child {
    margin-right: var(--space);
  }
  
  > :last-child {
    flex: 1;
  }
}

.stack {
  --space: #{$medium};
  display: flex;
  flex-direction: column;
  justify-content: flex-start;

  > * {
    margin-top: 0;
    margin-bottom: 0;
  }

  > * + * {
    margin-top: var(--space);
  }

  &:only-child {
    height: 100%;
  }
}

.cluster {
  --space: #{$medium};
  overflow: hidden;

  > * {
    display: flex;
    flex-wrap: wrap;
    justify-content: flex-start;
    align-items: center;
    margin: calc(var(--space) / 2 * -1);

    > * {
      margin: calc(var(--space) / 2);
    }
  }
}

.grid {
  --space: #{$medium};
  --quantity: 4;

  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(calc(100% / var(--quantity)), 1fr));
  grid-gap: var(--space);
}

.switcher {
  --threshold: #{$measure};
  --space: #{$medium};
  display: flex;
  flex-wrap: wrap;
  margin: calc(var(--space) / 2 * -1);

  > * {
    flex-grow: 1;
    flex-basis: calc((var(--threshold) - (100% - var(--space))) * 999);
    margin: calc(var(--space) / 2);
  }

  &.has-12 > :nth-last-child(n + 13),
  &.has-11 > :nth-last-child(n + 12),
  &.has-10 > :nth-last-child(n + 11),
  &.has-9 > :nth-last-child(n + 10),
  &.has-8 > :nth-last-child(n + 9),
  &.has-7 > :nth-last-child(n + 8),
  &.has-6 > :nth-last-child(n + 7),
  &.has-5 > :nth-last-child(n + 6),
  &.has-4 > :nth-last-child(n + 5),
  &.has-3 > :nth-last-child(n + 4),
  &.has-2 > :nth-last-child(n + 3) {
    flex-basis: 100%;

    & ~ * {
      flex-basis: 100%;
    }
  }
}

.frame {
  position: relative;
  padding-bottom: calc(var(--n) / var(--d) * 100%);
  
  &.is-16\:9 {
    --n: 9;
    --d: 16;
  }

  &.is-4\:3 {
    --n: 3;
    --d: 4;
  }

  &.is-square {
    --n: 1;
    --d: 1;
  }

  > * {
    overflow: hidden;
    position: absolute;
    display: flex;
    justify-content: center;
    align-items: center;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
  }

  > img,
  > video {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }
}

.aside {
  --space: #{$medium};
  display: flex;
  flex-wrap: wrap;
  margin: calc(var(--space) / 2 * -1);

  aside {
    flex-basis: 20rem;
    flex-grow: 1;
    margin: calc(var(--space) / 2);
  }

  .not-aside {
    min-width: 50%;
    flex-grow: 999;
    margin: calc(var(--space) / 2);
  }
}